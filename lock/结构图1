┌─────────────────────────────────────────────────────────────────────┐
│                            展现层 (View Layer)                        │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌─────────┐ │
│  │ ImageView.vue│  │ TextView.vue │  │ VideoView.vue│  │  ...    │ │
│  │  (图片视图)   │  │  (文本视图)   │  │  (视频视图)   │  │ (其他)  │ │
│  └──────────────┘  └──────────────┘  └──────────────┘  └─────────┘ │
│         ↑                  ↑                  ↑                      │
│         └──────────────────┴──────────────────┘                      │
│                            │                                         │
│                   Vue3 Template 遍历渲染                              │
└─────────────────────────────────────────────────────────────────────┘
                              ↑
┌─────────────────────────────────────────────────────────────────────┐
│                         核心引擎层 (Core Layer)                       │
├─────────────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────────────────────────────┐ │
│  │                    Context Manager (context.ts)                 │ │
│  │  • 收集所有视图节点                                               │ │
│  │  • 收集所有动画节点                                               │ │
│  │  • 提供动画控制 API (play/pause/stop)                            │ │
│  └────────────────────────────────────────────────────────────────┘ │
│                              ↕                                       │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────────────┐  │
│  │ DSL Node Tree│  │Variable Mgr  │  │ Expression Parser        │  │
│  │              │  │              │  │                          │  │
│  │• AnimNode    │  │• 变量存储     │  │• 字符串表达式解析         │  │
│  │• CommandNode │  │• 变量管理     │  │• 数学计算                │  │
│  │• ViewNode    │  │• ref响应式    │  │• computed 计算属性       │  │
│  │              │  │              │  │                          │  │
│  │每个Node包含:  │  └──────────────┘  └──────────────────────────┘  │
│  │ - name       │                                                   │
│  │ - attrs      │         Vue3 响应式系统 (ref / computed)           │
│  │ - nodeId     │                                                   │
│  │ - children   │                                                   │
│  └──────────────┘                                                   │
│         ↑                                                            │
└─────────┼────────────────────────────────────────────────────────────┘
          │
┌─────────┼────────────────────────────────────────────────────────────┐
│         │                  解析层 (Parser Layer)                      │
├─────────┼────────────────────────────────────────────────────────────┤
│         ↓                                                            │
│  ┌──────────────────┐          ┌──────────────────────────┐         │
│  │  useDslNode()    │  ←────   │   DOMParser              │         │
│  │                  │          │                          │         │
│  │  将 DOM Class    │          │  解析用户脚本代码         │         │
│  │  转换为 DSL Node │          │  生成 DOM 结构 Class     │         │
│  └──────────────────┘          └──────────────────────────┘         │
│         ↑                                  ↑                         │
└─────────┼──────────────────────────────────┼─────────────────────────┘
          │                                  │
┌─────────┼──────────────────────────────────┼─────────────────────────┐
│         │              输入层 (Input Layer)                           │
├─────────┴──────────────────────────────────┴─────────────────────────┤
│                                                                       │
│                      用户输入的 DSL 脚本代码                           │
│                      (Script / XML / JSON)                            │
│                                                                       │
└───────────────────────────────────────────────────────────────────────┘
