<!DOCTYPE html>

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘è‡ªåŠ¨æ’­æ”¾è§£å†³æ–¹æ¡ˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

```
    .container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }

    h1 {
        text-align: center;
        color: #4a5568;
        margin-bottom: 30px;
    }

    .video-container {
        position: relative;
        width: 100%;
        max-width: 600px;
        margin: 20px auto;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    video {
        width: 100%;
        height: auto;
        display: block;
    }

    .controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin: 20px 0;
        flex-wrap: wrap;
    }

    .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 25px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .btn-secondary {
        background: #e2e8f0;
        color: #4a5568;
    }

    .btn-secondary:hover {
        background: #cbd5e0;
        transform: translateY(-1px);
    }

    .status {
        background: #f7fafc;
        border-left: 4px solid #4299e1;
        padding: 15px 20px;
        margin: 20px 0;
        border-radius: 0 8px 8px 0;
        font-family: 'Monaco', 'Menlo', monospace;
        font-size: 13px;
        line-height: 1.5;
    }

    .status.success {
        border-color: #38a169;
        background: #f0fff4;
    }

    .status.error {
        border-color: #e53e3e;
        background: #fed7d7;
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.7);
        display: none;
        align-items: center;
        justify-content: center;
        color: white;
        text-align: center;
        z-index: 10;
    }

    .overlay.show {
        display: flex;
    }

    .play-hint {
        background: rgba(255,255,255,0.1);
        padding: 20px;
        border-radius: 10px;
        backdrop-filter: blur(10px);
    }

    .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        margin: 15px 0;
        font-family: 'Monaco', 'Menlo', monospace;
        font-size: 13px;
        line-height: 1.6;
        overflow-x: auto;
    }

    .feature-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }

    .feature-item {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        border-left: 4px solid #667eea;
    }

    .feature-title {
        font-weight: 600;
        color: #4a5568;
        margin-bottom: 8px;
    }

    .feature-desc {
        color: #718096;
        font-size: 14px;
        line-height: 1.5;
    }
</style>
```

</head>
<body>
    <div class="container">
        <h1>ğŸ¬ æ™ºèƒ½è§†é¢‘è‡ªåŠ¨æ’­æ”¾æ–¹æ¡ˆ</h1>

```
    <div class="video-container">
        <video id="mainVideo" preload="metadata" loop playsinline>
            <!-- ç¤ºä¾‹è§†é¢‘æº - å®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºæ‚¨çš„è§†é¢‘ -->
            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
        </video>
       Â 
        <div class="overlay" id="playOverlay">
            <div class="play-hint">
                <h3>ğŸ”Š ç‚¹å‡»æ’­æ”¾å¸¦å£°éŸ³çš„è§†é¢‘</h3>
                <p>æµè§ˆå™¨ç­–ç•¥è¦æ±‚ç”¨æˆ·äº¤äº’åæ‰èƒ½æ’­æ”¾æœ‰å£°è§†é¢‘</p>
                <button class="btn btn-primary" onclick="playWithSound()">æ’­æ”¾è§†é¢‘</button>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn btn-primary" onclick="attemptAutoplay()">å°è¯•è‡ªåŠ¨æ’­æ”¾</button>
        <button class="btn btn-secondary" onclick="playMuted()">é™éŸ³æ’­æ”¾</button>
        <button class="btn btn-secondary" onclick="playWithSound()">æœ‰å£°æ’­æ”¾</button>
        <button class="btn btn-secondary" onclick="checkAutoplayPolicy()">æ£€æŸ¥ç­–ç•¥</button>
    </div>

    <div id="statusLog" class="status">
        ç­‰å¾…æ“ä½œ...
    </div>

    <div class="feature-list">
        <div class="feature-item">
            <div class="feature-title">ğŸ¯ æ™ºèƒ½é™çº§</div>
            <div class="feature-desc">å…ˆå°è¯•æœ‰å£°æ’­æ”¾ï¼Œå¤±è´¥åè‡ªåŠ¨é™çº§ä¸ºé™éŸ³æ’­æ”¾</div>
        </div>
        <div class="feature-item">
            <div class="feature-title">ğŸ” ç­–ç•¥æ£€æµ‹</div>
            <div class="feature-desc">æ£€æµ‹æµè§ˆå™¨çš„è‡ªåŠ¨æ’­æ”¾ç­–ç•¥å’Œåª’ä½“å‚ä¸åº¦</div>
        </div>
        <div class="feature-item">
            <div class="feature-title">ğŸª ç”¨æˆ·å¼•å¯¼</div>
            <div class="feature-desc">æä¾›å‹å¥½çš„äº¤äº’æç¤ºï¼Œå¼•å¯¼ç”¨æˆ·æ‰‹åŠ¨æ’­æ”¾</div>
        </div>
        <div class="feature-item">
            <div class="feature-title">ğŸ“± ç§»åŠ¨ä¼˜åŒ–</div>
            <div class="feature-desc">é’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„æ’­æ”¾ç­–ç•¥ä¼˜åŒ–</div>
        </div>
    </div>

    <h3>ğŸ”§ æ ¸å¿ƒå®ç°ä»£ç ï¼š</h3>
    <div class="code-block">
```

// æ™ºèƒ½è‡ªåŠ¨æ’­æ”¾å‡½æ•°
async function attemptAutoplay() {
const video = document.getElementById(â€˜mainVideoâ€™);
const overlay = document.getElementById(â€˜playOverlayâ€™);

```
try {
    // ç¬¬ä¸€æ­¥ï¼šå°è¯•æœ‰å£°è‡ªåŠ¨æ’­æ”¾
    video.muted = false;
    video.volume = 0.8;
   Â 
    log('ğŸµ å°è¯•æœ‰å£°è‡ªåŠ¨æ’­æ”¾...');
    await video.play();
   Â 
    log('âœ… æœ‰å£°è‡ªåŠ¨æ’­æ”¾æˆåŠŸï¼', 'success');
    overlay.classList.remove('show');
   Â 
} catch (error) {
    log('âŒ æœ‰å£°æ’­æ”¾è¢«é˜»æ­¢: ' + error.message, 'error');
   Â 
    try {
        // ç¬¬äºŒæ­¥ï¼šé™çº§ä¸ºé™éŸ³è‡ªåŠ¨æ’­æ”¾
        video.muted = true;
        log('ğŸ”‡ å°è¯•é™éŸ³è‡ªåŠ¨æ’­æ”¾...');
        await video.play();
       Â 
        log('âœ… é™éŸ³è‡ªåŠ¨æ’­æ”¾æˆåŠŸï¼éœ€è¦ç”¨æˆ·äº¤äº’æ¥å¼€å¯å£°éŸ³', 'success');
        overlay.classList.add('show');
       Â 
    } catch (mutedError) {
        log('âŒ æ‰€æœ‰è‡ªåŠ¨æ’­æ”¾å°è¯•éƒ½å¤±è´¥äº†: ' + mutedError.message, 'error');
        overlay.classList.add('show');
    }
}
```

}

// æ£€æŸ¥è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
async function checkAutoplayPolicy() {
if (!navigator.getAutoplayPolicy) {
log(â€˜âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒè‡ªåŠ¨æ’­æ”¾ç­–ç•¥æ£€æµ‹APIâ€™);
return;
}

```
const videoPolicy = navigator.getAutoplayPolicy('mediaelement');
const audioPolicy = navigator.getAutoplayPolicy('audiocontext');

log(`ğŸ“‹ è‡ªåŠ¨æ’­æ”¾ç­–ç•¥:
ğŸ¬ è§†é¢‘: ${videoPolicy}
ğŸµ éŸ³é¢‘: ${audioPolicy}`);
```

}
</div>

```
    <h3>ğŸ“± ç§»åŠ¨ç«¯ç‰¹æ®Šå¤„ç†ï¼š</h3>
    <div class="code-block">
```

// ç§»åŠ¨ç«¯æ£€æµ‹å’Œç‰¹æ®Šå¤„ç†
function isMobileDevice() {
return /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

// é’ˆå¯¹ç§»åŠ¨ç«¯çš„æ’­æ”¾ç­–ç•¥
function handleMobileAutoplay() {
if (isMobileDevice()) {
// iOS Safari éœ€è¦åœ¨ç”¨æˆ·äº¤äº’åæ‰èƒ½æ’­æ”¾
// Android Chrome æ”¯æŒé™éŸ³è‡ªåŠ¨æ’­æ”¾
const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);

```
    if (isIOS) {
        log('ğŸ“± æ£€æµ‹åˆ°iOSè®¾å¤‡ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’');
        return false; // ä¸å°è¯•è‡ªåŠ¨æ’­æ”¾
    }
}
return true; // å¯ä»¥å°è¯•è‡ªåŠ¨æ’­æ”¾
```

}
</div>
</div>

```
<script>
    const video = document.getElementById('mainVideo');
    const statusLog = document.getElementById('statusLog');
    const overlay = document.getElementById('playOverlay');

    // æ—¥å¿—è¾“å‡ºå‡½æ•°
    function log(message, type = 'info') {
        const timestamp = new Date().toLocaleTimeString();
        statusLog.innerHTML = `[${timestamp}] ${message}`;
        statusLog.className = `status ${type}`;
        console.log(message);
    }

    // æ™ºèƒ½è‡ªåŠ¨æ’­æ”¾å‡½æ•°
    async function attemptAutoplay() {
        try {
            // ç¬¬ä¸€æ­¥ï¼šå°è¯•æœ‰å£°è‡ªåŠ¨æ’­æ”¾
            video.muted = false;
            video.volume = 0.8;
           Â 
            log('ğŸµ å°è¯•æœ‰å£°è‡ªåŠ¨æ’­æ”¾...');
            await video.play();
           Â 
            log('âœ… æœ‰å£°è‡ªåŠ¨æ’­æ”¾æˆåŠŸï¼', 'success');
            overlay.classList.remove('show');
           Â 
        } catch (error) {
            log('âŒ æœ‰å£°æ’­æ”¾è¢«é˜»æ­¢: ' + error.message, 'error');
           Â 
            try {
                // ç¬¬äºŒæ­¥ï¼šé™çº§ä¸ºé™éŸ³è‡ªåŠ¨æ’­æ”¾
                video.muted = true;
                log('ğŸ”‡ å°è¯•é™éŸ³è‡ªåŠ¨æ’­æ”¾...');
                await video.play();
               Â 
                log('âœ… é™éŸ³è‡ªåŠ¨æ’­æ”¾æˆåŠŸï¼éœ€è¦ç”¨æˆ·äº¤äº’æ¥å¼€å¯å£°éŸ³', 'success');
                overlay.classList.add('show');
               Â 
            } catch (mutedError) {
                log('âŒ æ‰€æœ‰è‡ªåŠ¨æ’­æ”¾å°è¯•éƒ½å¤±è´¥äº†: ' + mutedError.message, 'error');
                overlay.classList.add('show');
            }
        }
    }

    // é™éŸ³æ’­æ”¾
    async function playMuted() {
        try {
            video.muted = true;
            await video.play();
            log('ğŸ”‡ é™éŸ³æ’­æ”¾æˆåŠŸ', 'success');
            overlay.classList.remove('show');
        } catch (error) {
            log('âŒ é™éŸ³æ’­æ”¾å¤±è´¥: ' + error.message, 'error');
        }
    }

    // æœ‰å£°æ’­æ”¾ï¼ˆéœ€è¦ç”¨æˆ·äº¤äº’ï¼‰
    async function playWithSound() {
        try {
            video.muted = false;
            video.volume = 0.8;
            await video.play();
            log('ğŸµ æœ‰å£°æ’­æ”¾æˆåŠŸ', 'success');
            overlay.classList.remove('show');
        } catch (error) {
            log('âŒ æœ‰å£°æ’­æ”¾å¤±è´¥: ' + error.message, 'error');
        }
    }

    // æ£€æŸ¥è‡ªåŠ¨æ’­æ”¾ç­–ç•¥
    async function checkAutoplayPolicy() {
        let policyInfo = 'ğŸ“‹ è‡ªåŠ¨æ’­æ”¾ç­–ç•¥æ£€æŸ¥:\n';
       Â 
        // æ£€æŸ¥ç°ä»£API
        if (navigator.getAutoplayPolicy) {
            const videoPolicy = navigator.getAutoplayPolicy('mediaelement');
            const audioPolicy = navigator.getAutoplayPolicy('audiocontext');
            policyInfo += `ğŸ¬ è§†é¢‘å…ƒç´ : ${videoPolicy}\nğŸµ éŸ³é¢‘ä¸Šä¸‹æ–‡: ${audioPolicy}`;
        } else {
            policyInfo += 'âš ï¸ æµè§ˆå™¨ä¸æ”¯æŒ getAutoplayPolicy API';
        }

        // æ£€æŸ¥è®¾å¤‡ç±»å‹
        const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        policyInfo += `\nğŸ“± ç§»åŠ¨è®¾å¤‡: ${isMobile ? 'æ˜¯' : 'å¦'}`;

        // æ£€æŸ¥æµè§ˆå™¨
        const browser = getBrowserInfo();
        policyInfo += `\nğŸŒ æµè§ˆå™¨: ${browser}`;

        log(policyInfo);
    }

    // è·å–æµè§ˆå™¨ä¿¡æ¯
    function getBrowserInfo() {
        const ua = navigator.userAgent;
        if (ua.includes('Chrome')) return 'Chrome';
        if (ua.includes('Firefox')) return 'Firefox';
        if (ua.includes('Safari')) return 'Safari';
        if (ua.includes('Edge')) return 'Edge';
        return 'æœªçŸ¥';
    }

    // ç›‘å¬è§†é¢‘äº‹ä»¶
    video.addEventListener('play', () => {
        log('â–¶ï¸ è§†é¢‘å¼€å§‹æ’­æ”¾', 'success');
    });

    video.addEventListener('pause', () => {
        log('â¸ï¸ è§†é¢‘æš‚åœ');
    });

    video.addEventListener('ended', () => {
        log('â¹ï¸ è§†é¢‘æ’­æ”¾ç»“æŸ');
    });

    video.addEventListener('error', (e) => {
        log('âŒ è§†é¢‘åŠ è½½é”™è¯¯: ' + e.message, 'error');
    });

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨å°è¯•æ’­æ”¾
    document.addEventListener('DOMContentLoaded', () => {
        log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå‡†å¤‡è‡ªåŠ¨æ’­æ”¾æµ‹è¯•');
       Â 
        // å»¶è¿Ÿä¸€ä¸‹è®©é¡µé¢å®Œå…¨åŠ è½½
        setTimeout(() => {
            attemptAutoplay();
        }, 1000);
    });

    // ç›‘å¬ç”¨æˆ·äº¤äº’ä»¥æ”¹å–„åç»­çš„è‡ªåŠ¨æ’­æ”¾æˆåŠŸç‡
    let hasUserInteracted = false;
   Â 
    ['click', 'touchstart', 'keydown'].forEach(event => {
        document.addEventListener(event, () => {
            if (!hasUserInteracted) {
                hasUserInteracted = true;
                log('ğŸ‘† æ£€æµ‹åˆ°ç”¨æˆ·äº¤äº’ï¼Œåª’ä½“å‚ä¸åº¦æå‡');
            }
        }, { once: true });
    });
</script>
```

</body>
</html>
