<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
<defs>
<linearGradient id="redGrad" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#FF7043;stop-opacity:1" />
<stop offset="100%" style="stop-color:#F4511E;stop-opacity:1" />
</linearGradient>
<linearGradient id="goldGrad" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#FFCA28;stop-opacity:1" />
<stop offset="100%" style="stop-color:#FFB300;stop-opacity:1" />
</linearGradient>
<linearGradient id="darkGrad" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:#546E7A;stop-opacity:1" />
<stop offset="100%" style="stop-color:#37474F;stop-opacity:1" />
</linearGradient>
<filter id="shadowPixi">
<feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.4"/>
</filter>
</defs>
<rect x="50" y="50" width="1300" height="900" rx="10" fill="#FFF3E0" stroke="#FF7043" stroke-width="3"/>
<text x="700" y="90" font-size="24" font-weight="bold" text-anchor="middle" fill="#D84315">PixiJS 高性能渲染子系统 (Canvas/WebGL)</text>
<text x="700" y="115" font-size="14" text-anchor="middle" fill="#E64A19">扩展架构 - 接管复杂图形与粒子渲染</text>
<g transform="translate(80, 150)">
<rect x="0" y="0" width="300" height="750" rx="8" fill="#FFCCBC" stroke="#D84315" stroke-width="2" stroke-dasharray="5,5"/>
<path d="M 20 -10 L 20 50 L 180 50 L 200 30 L 200 -10 Z" fill="url(#redGrad)" filter="url(#shadowPixi)"/>
<text x="110" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Vue/DSL 桥接层</text>

<rect x="30" y="80" width="240" height="60" rx="5" fill="#E1F5FE" stroke="#0288D1" stroke-width="2"/>
<text x="150" y="105" font-size="14" font-weight="bold" text-anchor="middle" fill="#0277BD">DSL Data Context</text>
<text x="150" y="125" font-size="10" text-anchor="middle" fill="#0277BD">来自主架构数据管理层</text>

<rect x="30" y="180" width="240" height="100" rx="5" fill="white" stroke="#FF7043" stroke-width="2" filter="url(#shadowPixi)"/>
<text x="150" y="210" font-size="14" font-weight="bold" text-anchor="middle" fill="#D84315">PixiCanvasWrapper</text>
<text x="150" y="230" font-size="11" text-anchor="middle" fill="#555">.vue 组件 (挂载点)</text>
<text x="150" y="250" font-size="10" text-anchor="middle" fill="#999">负责初始化 Application</text>

<rect x="30" y="320" width="240" height="140" rx="5" fill="#FFF9C4" stroke="#FBC02D" stroke-width="2" filter="url(#shadowPixi)"/>
<text x="150" y="350" font-size="14" font-weight="bold" text-anchor="middle" fill="#F57F17">Reactive Synchronizer</text>
<text x="150" y="375" font-size="11" text-anchor="middle" fill="#333">Watcher / Effect Scope</text>
<line x1="50" y1="390" x2="250" y2="390" stroke="#FBC02D" stroke-width="1"/>
<text x="150" y="410" font-size="10" text-anchor="middle" fill="#555">Diff Props (X, Y, Alpha)</text>
<text x="150" y="430" font-size="10" text-anchor="middle" fill="#555">Diff Texture / Resources</text>

<rect x="30" y="500" width="240" height="80" rx="5" fill="#E1BEE7" stroke="#8E24AA" stroke-width="2" filter="url(#shadowPixi)"/>
<text x="150" y="530" font-size="14" font-weight="bold" text-anchor="middle" fill="#6A1B9A">Event Proxy</text>
<text x="150" y="555" font-size="11" text-anchor="middle" fill="#4A148C">Pixi Pointer → DSL Event</text>

</g>
<g transform="translate(420, 150)">
<rect x="0" y="0" width="550" height="750" rx="8" fill="white" stroke="#546E7A" stroke-width="3" stroke-dasharray="8,0"/>
<path d="M 20 -10 L 20 50 L 220 50 L 240 30 L 240 -10 Z" fill="url(#darkGrad)" filter="url(#shadowPixi)"/>
<text x="130" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="white">PixiJS Engine Core</text>

<rect x="180" y="80" width="200" height="50" rx="25" fill="#CFD8DC" stroke="#455A64" stroke-width="2"/>
<text x="280" y="110" font-size="14" font-weight="bold" text-anchor="middle" fill="#37474F">Stage (Root Container)</text>

<g transform="translate(30, 160)">
    <rect x="150" y="0" width="200" height="70" rx="5" fill="#B2DFDB" stroke="#00695C" stroke-width="2" filter="url(#shadowPixi)"/>
    <text x="250" y="30" font-size="14" font-weight="bold" text-anchor="middle" fill="#004D40">Container (Group)</text>
    <text x="250" y="50" font-size="10" text-anchor="middle" fill="#004D40">transform / alpha / mask</text>

    <path d="M 250 70 L 130 110" stroke="#546E7A" stroke-width="2"/>
    <path d="M 250 70 L 370 110" stroke="#546E7A" stroke-width="2"/>

    <rect x="30" y="110" width="200" height="80" rx="5" fill="#FFCC80" stroke="#EF6C00" stroke-width="2" filter="url(#shadowPixi)"/>
    <text x="130" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#E65100">Sprite (Image)</text>
    <text x="130" y="160" font-size="10" text-anchor="middle" fill="#BF360C">texture / anchor / blendMode</text>

    <rect x="270" y="110" width="200" height="80" rx="5" fill="#FFCC80" stroke="#EF6C00" stroke-width="2" filter="url(#shadowPixi)"/>
    <text x="370" y="140" font-size="14" font-weight="bold" text-anchor="middle" fill="#E65100">Graphics / Mesh</text>
    <text x="370" y="160" font-size="10" text-anchor="middle" fill="#BF360C">geometry / shader / draw</text>

    <rect x="150" y="220" width="200" height="80" rx="5" fill="#D1C4E9" stroke="#512DA8" stroke-width="2" filter="url(#shadowPixi)"/>
    <text x="250" y="250" font-size="14" font-weight="bold" text-anchor="middle" fill="#4527A0">Filters & Effects</text>
    <text x="250" y="270" font-size="10" text-anchor="middle" fill="#311B92">Blur / ColorMatrix / Custom</text>
    
    <path d="M 130 190 L 200 220" stroke="#546E7A" stroke-width="1" stroke-dasharray="4,4"/>
    <path d="M 370 190 L 300 220" stroke="#546E7A" stroke-width="1" stroke-dasharray="4,4"/>
</g>

<rect x="50" y="500" width="450" height="100" rx="10" fill="#212121" filter="url(#shadowPixi)"/>
<text x="275" y="535" font-size="16" font-weight="bold" text-anchor="middle" fill="#4FC3F7">System Ticker (RAF)</text>

<g transform="translate(80, 550)">
   <circle cx="0" cy="0" r="15" fill="#F44336"/>
   <text x="0" y="5" font-size="10" text-anchor="middle" fill="white" font-weight="bold">1</text>
   <text x="25" y="5" font-size="12" fill="#B0BEC5">Update Props</text>

   <path d="M 100 0 L 130 0" stroke="#546E7A" stroke-width="2" marker-end="url(#arrowGray)"/>

   <circle cx="150" cy="0" r="15" fill="#F44336"/>
   <text x="150" y="5" font-size="10" text-anchor="middle" fill="white" font-weight="bold">2</text>
   <text x="175" y="5" font-size="12" fill="#B0BEC5">Recalculate</text>

   <path d="M 250 0 L 280 0" stroke="#546E7A" stroke-width="2" marker-end="url(#arrowGray)"/>

   <circle cx="300" cy="0" r="15" fill="#F44336"/>
   <text x="300" y="5" font-size="10" text-anchor="middle" fill="white" font-weight="bold">3</text>
   <text x="325" y="5" font-size="12" fill="#B0BEC5">WebGL Draw</text>
</g>

<rect x="50" y="630" width="450" height="80" rx="5" fill="#37474F"/>
<text x="275" y="660" font-size="14" font-weight="bold" text-anchor="middle" fill="#80CBC4">WebGL 2.0 Context</text>
<text x="275" y="680" font-size="10" text-anchor="middle" fill="#546E7A">GPU Acceleration / Batched Rendering</text>

</g>
<g transform="translate(1000, 150)">
<rect x="0" y="0" width="260" height="750" rx="8" fill="#FFF8E1" stroke="#FFA000" stroke-width="2" stroke-dasharray="5,5"/>
<path d="M 20 -10 L 20 50 L 200 50 L 220 30 L 220 -10 Z" fill="url(#goldGrad)" filter="url(#shadowPixi)"/>
<text x="120" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="#5D4037">Asset & Cache</text>

<rect x="30" y="80" width="200" height="80" rx="5" fill="#FFECB3" stroke="#FFC107" stroke-width="2" filter="url(#shadowPixi)"/>
<text x="130" y="110" font-size="14" font-weight="bold" text-anchor="middle" fill="#795548">Pixi Assets</text>
<text x="130" y="135" font-size="11" text-anchor="middle" fill="#8D6E63">Promise based Loader</text>

<g transform="translate(30, 200)">
  <rect x="0" y="0" width="200" height="250" rx="5" fill="#FFCA28" filter="url(#shadowPixi)"/>
  <text x="100" y="30" font-size="14" font-weight="bold" text-anchor="middle" fill="#3E2723">Texture Cache</text>
  
  <rect x="20" y="50" width="160" height="30" fill="#FFF3E0" stroke="#3E2723" stroke-width="0.5"/>
  <text x="100" y="70" font-size="10" text-anchor="middle">BaseTexture (GPU)</text>

  <rect x="20" y="90" width="160" height="30" fill="#FFF3E0" stroke="#3E2723" stroke-width="0.5"/>
  <text x="100" y="110" font-size="10" text-anchor="middle">Spritesheet Atlas</text>

  <rect x="20" y="130" width="160" height="30" fill="#FFF3E0" stroke="#3E2723" stroke-width="0.5"/>
  <text x="100" y="150" font-size="10" text-anchor="middle">Video Texture</text>
  
  <rect x="20" y="170" width="160" height="30" fill="#FFF3E0" stroke="#3E2723" stroke-width="0.5"/>
  <text x="100" y="190" font-size="10" text-anchor="middle">RenderTexture</text>
</g>

<rect x="30" y="500" width="200" height="80" rx="5" fill="#BCAAA4" stroke="#5D4037" stroke-width="2"/>
<text x="130" y="530" font-size="14" font-weight="bold" text-anchor="middle" fill="white">GC / Destroy</text>
<text x="130" y="555" font-size="11" text-anchor="middle" fill="#EFEBE9">Auto Unload</text>

</g>
<path d="M 380 230 L 420 230" stroke="#D84315" stroke-width="4" marker-end="url(#arrowRedBig)"/>
<text x="400" y="220" font-size="11" font-weight="bold" fill="#D84315" text-anchor="middle">Mount</text>
<path d="M 380 390 L 420 390 L 420 300 L 450 300" stroke="#FBC02D" stroke-width="3" fill="none" marker-end="url(#arrowGold)"/>
<text x="400" y="380" font-size="11" font-weight="bold" fill="#F9A825" text-anchor="middle">Sync Props</text>
<path d="M 450 540 L 400 540 L 380 540" stroke="#8E24AA" stroke-width="3" fill="none" marker-end="url(#arrowPurple)"/>
<text x="415" y="530" font-size="11" font-weight="bold" fill="#8E24AA" text-anchor="middle">Events</text>
<path d="M 1000 320 L 970 320" stroke="#FFA000" stroke-width="3" marker-end="url(#arrowGold)"/>
<text x="985" y="310" font-size="11" font-weight="bold" fill="#EF6C00" text-anchor="middle">Textures</text>
<text x="700" y="960" font-size="12" text-anchor="middle" fill="#546E7A">
Interaction Strategy: Vue Watchers drive Pixi Properties; Pixi Ticker drives Canvas Rendering.
</text>
<defs>
<marker id="arrowRedBig" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
<path d="M0,0 L0,6 L10,3 z" fill="#D84315" />
</marker>
<marker id="arrowGold" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
<path d="M0,0 L0,6 L9,3 z" fill="#FFA000" />
</marker>
<marker id="arrowPurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
<path d="M0,0 L0,6 L9,3 z" fill="#8E24AA" />
</marker>
<marker id="arrowGray" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
<path d="M0,0 L0,6 L8,3 z" fill="#546E7A" />
</marker>
</defs>
</svg>
